<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions">
<h:body>
  <div class="col-12 m-0 p-0 mb-2">
    <p:outputLabel for="process-time-interval"
      value="#{ivy.cms.co('/Dialogs/com/axonivy/utils/bpmnstatistic/ProcessesMonitor/TimeInterval')}" />
  </div>

  <h:panelGroup id="process-time-interval" styleClass="col-12 px-0 mx-0 grid formgrid ui-fluid">
    <!-- Type -->
    <div class="col-4 p-0 m-0 pr-2">
      <p:selectOneMenu value="#{timeIntervalFilterBean.selectedType}">
        <f:selectItems value="#{timeIntervalFilterBean.intervalTypes}" var="type" itemValue="#{type}"
          itemLabel="#{type.getCmsName()}" />
        <p:ajax listener="#{timeIntervalFilterBean.onSelectType()}" process="@this" partialSubmit="true"
          update="process-time-interval interval-selection-group" />
      </p:selectOneMenu>
    </div>

    <h:panelGroup id="interval-selection-group" styleClass="col-8 m-0 p-0 grid formgrid align-items-center">
      <h:panelGroup styleClass="col-12 m-0 p-0 grid formgrid" rendered="#{timeIntervalFilterBean.pointSelection}">
        <div class="col-6 pl-1 pr-1">
          <p:calendar value="#{timeIntervalFilterBean.filter.from}" readonly="true"
            pattern="#{timeIntervalFilterBean.timePattern}" />
        </div>
        <div class="col-6 pr-0">
          <p:calendar value="#{timeIntervalFilterBean.filter.to}" readonly="true"
            pattern="#{timeIntervalFilterBean.timePattern}" />
        </div>
      </h:panelGroup>

      <h:panelGroup styleClass="col-12 m-0 p-0 grid formgrid" rendered="#{timeIntervalFilterBean.rangeSelection}">
        <!-- From -->
        <div class="col-6 pl-1 pr-1">
          <p:calendar showOn="button" value="#{timeIntervalFilterBean.filter.from}"
            pattern="#{timeIntervalFilterBean.timePattern}">
            <p:ajax listener="#{timeIntervalFilterBean.onSelectDateTime()}"
              update="process-time-interval" process="@this" partialSubmit="true" />
          </p:calendar>
        </div>
        <!-- To -->
        <div class="col-6 pr-0">
          <p:calendar showOn="button" value="#{timeIntervalFilterBean.filter.to}"
            pattern="#{timeIntervalFilterBean.timePattern}">
            <p:ajax listener="#{timeIntervalFilterBean.onSelectDateTime()}"
              update="process-time-interval" process="@this" partialSubmit="true" />
          </p:calendar>
        </div>
      </h:panelGroup>

      <h:panelGroup styleClass="col-12 m-0 p-0 grid formgrid"
        rendered="#{timeIntervalFilterBean.withInSelection or timeIntervalFilterBean.currentSelection}">
        <!-- Time -->
        <h:panelGroup id="interval-time-with-in" layout="block" styleClass="col-6 pl-1 pr-1">
          <p:inputText value="#{timeIntervalFilterBean.currentTime}"
            readonly="#{timeIntervalFilterBean.currentSelection}" required="true"
            placeholder="#{ivy.cms.co('/Labels/EnterANumber')}">
            <p:keyFilter mask="num" />
            <p:ajax listener="#{timeIntervalFilterBean.unifyFilterAndRefreshData()}" process="@this" update="@this"
              partialSubmit="true" />
          </p:inputText>
        </h:panelGroup>
        <!-- Unit options -->
        <div class="col-6 pr-0">
          <p:selectOneMenu value="#{timeIntervalFilterBean.selectedUnit}">
            <f:selectItems value="#{timeIntervalFilterBean.intervalUnits}" var="unit" itemValue="#{unit}"
              itemLabel="#{unit.getCmsName()}" />
            <p:ajax update="interval-time-with-in" listener="#{timeIntervalFilterBean.onSelectUnit()}" />
          </p:selectOneMenu>
        </div>
      </h:panelGroup>
    </h:panelGroup>
    <div class="col-12">
      <p:message for="process-time-interval" />
    </div>
  </h:panelGroup>
</h:body>
</html>